# Skyline ACE: Precise Controls 기능 구현 현황

## ✅ 구현 완료 기능 (Implemented)

### 1. 터치 인터페이스 및 UI 최적화
- [x] **조이스틱:** dynamic 모드 + CSS 가이드로 레이더 왼쪽 고정 표시, 상하좌우 정상 동작
- [x] **UI 레이아웃:** 레이더(130px,최대) > 조이스틱(86px) > 발사버튼(65px,네모) > 레버(트랙+핸들)
- [x] **터치 이벤트 격리:** 조작 요소별 독립적 터치 인식 보장 및 배경 터치 간섭 차단
- [x] **HUD 정비:** ALT/SPD, KILLS/GOAL, 타이머(분:초), HP바, 모바일 가독성 최적화
- [x] **스프링백 레버:** 올리면 가속, 내리면 감속, 놓으면 중앙 복귀 후 속도 유지

### 2. 조종 및 물리 엔진
- [x] **조이스틱 방향성:** 밀면 상승, 당기면 하강하는 직관적 아케이드 조작
- [x] **자동 이륙:** 시작시 풀스로틀 자동 이륙, 이륙시간 1/2 단축
- [x] **자동 수평 유지:** 조이스틱 미조작시 안정적인 기체 수평 복원
- [x] **자동 추적:** 조이스틱 미조작시 가장 가까운 적 유닛 자동 추적(난이도별 slerp 0.01~0.05)
- [x] **속도 난이도 연동:** DIFF 테이블 기반 최대 속도 스케일링 (Lv1:10, Lv5:7)

### 3. 메인 유닛 모델
- [x] **JET (15파트):** 노즈콘, 원통동체, 콕핏캐노피, 델타윙(ExtrudeGeometry), 발광윙팁, 수직미익, 수평안정판, 쌍엔진나셀, 애프터버너배기, 동체스트라이프
- [x] **UFO (5파트):** 원반본체, 발광토러스림, 반투명돔, 하부콘, 엔진글로우
- [x] **애프터버너 이펙트:** 추력에 따라 배기 불꽃 크기 실시간 변화
- [x] **엔진 트레일:** 비행 중 파란 컨트레일 파티클 생성

### 4. 적군/아군 유닛 모델
- [x] **전투기형 모델:** 콘동체, 날개, 미익, 엔진글로우, 발광윙팁(적:빨강, 아군:초록)
- [x] **3가지 AI 행동패턴:** CHASER(직추적+루프백), FLANKER(측면선회), DIVER(급강하폭격)
- [x] **전투 기동:** 근접시 회피 롤, 고도 바닥 제한, 탄도 예측 사격(난이도별 예측 2~12프레임)
- [x] **난이도별 AI 강화:** DIFF 테이블 기반 선회속도, 이동속도, 사격주기 차등
- [x] **아군 AI 독립 전투:** 아군 유닛이 독자적으로 적과 교전 (8000m 추적, 2000m 사격)
- [x] **아군 자동 출격 비율:** 적군 5대당 아군 1대 비율로 자동 출격 (최소 2대)

### 5. 전투 시스템
- [x] **수동 발사:** FIRE 버튼으로 사용자가 직접 발사 (자동조준은 탄도 보정만)
- [x] **자동발사 토글:** AUTO 버튼 ON 시 락온(dot>0.96, 3000m이내) 조건에서만 발사
- [x] **양쪽 날개 교차 발사:** 좌/우 날개에서 번갈아 발사 + 머즐 플래시
- [x] **타겟 레티클:** 적 유닛 화면 투영, 조준 시 회전 링 + 십자선 + 거리 표시
- [x] **락온 표시:** 명중 가능 각도(dot>0.96, 3000m 이내) 시 녹색 확대 "LOCK" 표시
- [x] **자동 조준 탄도:** DIFF 테이블 기반 탄도 보정 (Lv1:0.90 → Lv5:0.05)
- [x] **적 총알 피격:** 피격시 HP 감소 + 카메라 흔들림 + 폭발 + 화면 레드 플래시
- [x] **플레이어 HP:** DIFF 테이블 기반 체력 차등(Lv1:15HP → Lv5:3HP)
- [x] **킬 콤보:** 5초 이내 연속 킬 시 콤보 카운트 + 화면 표시(DOUBLE/TRIPLE/RAMPAGE/UNSTOPPABLE)

### 6. 폭발 및 이펙트
- [x] **5단계 폭발:** 코어플래시 → 화염코어 → 화염외곽 → 연기 → 스파크 + 파편
- [x] **충격파 링:** 폭발 시 TorusGeometry 충격파 확대 후 소멸
- [x] **머즐 플래시:** 발사시/적 사격시 순간 발광 이펙트
- [x] **카메라 흔들림:** 피격시 및 근접 폭발시 카메라 셰이크 (감쇠 0.9)
- [x] **피격 레드 플래시:** 피격 시 화면 전체 빨간 플래시 (0.15초)
- [x] **데미지 바이넷:** HP 50% 이하 시 화면 가장자리 빨간 비네트 (25% 이하 최대)
- [x] **파티클 관리:** 자동 업데이트/투명도 감소/수명 만료시 제거

### 7. 월드 시뮬레이션
- [x] **랜드마크:** 에펠탑, 자유의 여신상
- [x] **동적 환경:** 선박20척(군함5+화물5+보트10), 여객기(6)+비행운, 구름(50,2층), 도시건물(4구역×20), 조류(8그룹)
- [x] **낮/밤 전환:** 시스템 시간 기반 배경, 조명, 안개 자동 변경
- [x] **스카이 돔:** vertexColors 그라데이션 하늘 + 수평선 색상
- [x] **야간 별:** 600개 포인트 별 + 건물 emissive 창문 발광
- [x] **파도 바다:** 100×100 세그먼트 사인파 파도 애니메이션 + flatShading
- [x] **섬 지형:** 도시 구역 하단 원형 섬 + 모래 해변 링
- [x] **반구 조명:** HemisphereLight (하늘↔지면 간접광)

### 8. 게임 진행 시스템
- [x] **난이도 5단계 (DIFF 테이블):** Lv1(Easy, 5kills) ~ Lv5(ACE, 50kills) 전면 리밸런싱
- [x] **제한시간 5분:** 300초 카운트다운(분:초 표시), 시간 초과시 미션 실패
- [x] **기지 귀환 시스템:** 적 전멸시 기지 귀환 → 다음 레벨 출격/재도전/메인메뉴 선택
- [x] **연속 출격:** 게임오버 없이 다음 레벨로 바로 재출격 가능(sortie)
- [x] **점수 계산:** 킬 수 × 100 × 난이도 + 시간보너스
- [x] **난이도 추천:** 성적에 따라 다음 적정 난이도 추천
- [x] **일시정지:** P키 토글
- [x] **HP 바 표시:** 플레이어 HP를 HUD에 시각적으로 표시 (녹→주황→빨강 색상 변화)

### 9. 시작 화면
- [x] **유닛 선택:** JET / UFO
- [x] **난이도 선택:** 1~5단계 + 레벨별 상세 설명(kills, difficulty, aim, HP)
- [x] **키조작 가이드:** 조이스틱, 레버, 발사, 자동추적, 일시정지 설명

### 10. 사운드
- [x] **엔진 사운드:** 루프 재생, 추력에 따른 피치 변화
- [x] **레이저 사운드:** 발사시 재생
- [x] **폭발 사운드:** 적 격추 및 피격시 재생
- [x] **락온 사운드:** 타겟 락온시 경고음
- [x] **피격 사운드:** 금속 충격음 (피격 전용)
- [x] **BGM:** Web Audio API 절차적 앰비언트 드론 (교전시 텐션 자동 상승)

### 11. 레이더
- [x] **실시간 레이더(130px):** 적(빨강), 아군(초록), 랜드마크(흰색) 표시
- [x] **탐지 범위:** 반경 10,000 유닛

---

## 🛠 향후 구현 필요 기능 (To-Be-Implemented)

### 1. 연출 고도화
- [ ] **오프닝 연출:** 항공모함 데크 엘리베이터 및 사출 시퀀스
- [ ] **3인칭 카메라 최적화:** 메인 유닛이 더 가까워 보이도록 카메라 거리 미세 조정
- [ ] **기지 귀환 연출:** 귀환 비행 애니메이션 및 착륙 시퀀스
- [ ] **슬로우 모션 킬캠:** 마지막 킬 시 슬로우 모션 연출 + 카메라 회전

### 2. 사운드 고도화
- [ ] **회피/가속/감속 전용 사운드:** 상황별 효과음 분리
- [ ] **적 근접 통과음:** 적기 고속 근접 통과 시 플라이바이 사운드

### 3. 전투 확장
- [ ] **미사일 무기:** 락온 후 유도 미사일 발사 옵션 (미사일 전환 버튼 + 자체 추적 AI)
- [ ] **메인 유닛-건물 충돌:** 랜드마크/빌딩과의 충돌 판정
- [ ] **보스 유닛:** 각 레벨 마지막에 대형 적기/비행모함 등장 (높은 HP + 특수 패턴)
- [ ] **무기 업그레이드:** 레벨 클리어 시 연사력/탄속/추적력 업그레이드 선택

### 4. 배경 확장
- [ ] **지구 구체 맵:** 구형 지구 지도로 한바퀴 돌면 제자리 복귀
- [ ] **날씨 시스템:** 비, 번개, 안개, 눈 등 랜덤 기상 (시야 제한 + 조종 난이도 변화)
- [ ] **시간대 전환 연출:** 실시간 일출/일몰 그라데이션 전환 효과

### 5. 시스템 확장
- [ ] **기체 업그레이드:** 처치 점수를 통한 기체 스펙(속도, 연사력) 강화
- [ ] **로컬 랭킹:** 스테이지별 최고 점수 기록 저장(localStorage)
- [ ] **업적/도전과제:** 특정 조건 달성 시 뱃지 획득 (예: "무피격 클리어", "10콤보 달성")
- [ ] **기체 커스터마이징:** 기체 색상, 데칼, 스킨 선택

### 6. 게임성 확장 (재미/흥미 제안)
- [ ] **연료 시스템:** 속도 관리 전략 요소, 연료 보급 아이템
- [ ] **파워업 아이템:** 필드에 랜덤 생성 (HP 회복, 일시적 무적, 연사력 2배 등)
- [ ] **미니맵 확대/축소:** 핀치 줌으로 레이더 확대/축소
- [ ] **리플레이 저장/재생:** 최고 점수 플레이를 녹화하여 재생
- [ ] **멀티플레이어:** WebRTC 기반 PvP 또는 Co-op 모드
- [ ] **스토리 모드:** 레벨간 브리핑 텍스트 + 미션 목표 다양화 (호위, 폭격, 정찰 등)
- [ ] **진동 피드백:** 모바일 피격/발사 시 navigator.vibrate() 진동 피드백
